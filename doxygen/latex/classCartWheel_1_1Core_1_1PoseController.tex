\hypertarget{classCartWheel_1_1Core_1_1PoseController}{
\section{CartWheel::Core::PoseController Class Reference}
\label{classCartWheel_1_1Core_1_1PoseController}\index{CartWheel::Core::PoseController@{CartWheel::Core::PoseController}}
}


{\ttfamily \#include $<$PoseController.h$>$}



Inheritance diagram for CartWheel::Core::PoseController:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=208pt]{classCartWheel_1_1Core_1_1PoseController__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for CartWheel::Core::PoseController:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=400pt]{classCartWheel_1_1Core_1_1PoseController__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classCartWheel_1_1Core_1_1PoseController_af6c78505668fd7101f9ce8d74637763b}{PoseController} (\hyperlink{classCartWheel_1_1Core_1_1Character}{Character} $\ast$ch)
\item 
\hypertarget{classCartWheel_1_1Core_1_1PoseController_ad4884fbd9b2758729e0b8dc481fbd7ea}{
virtual void {\bfseries addControlParams} (const \hyperlink{classCartWheel_1_1Core_1_1ControlParams}{ControlParams} \&params)}
\label{classCartWheel_1_1Core_1_1PoseController_ad4884fbd9b2758729e0b8dc481fbd7ea}

\item 
\hypertarget{classCartWheel_1_1Core_1_1PoseController_a8b371dedd146ebc70a15305e42199816}{
\hyperlink{classCartWheel_1_1Core_1_1ControlParams}{ControlParams} $\ast$ {\bfseries getControlParams} (int index)}
\label{classCartWheel_1_1Core_1_1PoseController_a8b371dedd146ebc70a15305e42199816}

\item 
virtual void \hyperlink{classCartWheel_1_1Core_1_1PoseController_a943dbb6a3cc2ea8c4897cb4979983cea}{scaleGains} (double factor)
\item 
\hypertarget{classCartWheel_1_1Core_1_1PoseController_adec071048442ffd4d0e0f1090eca667c}{
int {\bfseries getControlParamsCount} () const }
\label{classCartWheel_1_1Core_1_1PoseController_adec071048442ffd4d0e0f1090eca667c}

\item 
virtual void \hyperlink{classCartWheel_1_1Core_1_1PoseController_a48cf8c4a4ef762251f03a01ed8c24cd0}{computeTorques} (DynamicArray$<$ \hyperlink{classCartWheel_1_1Physics_1_1ContactPoint}{CartWheel::Physics::ContactPoint} $>$ $\ast$cfs)
\item 
void \hyperlink{classCartWheel_1_1Core_1_1PoseController_ae70268cf3e1ef0d0d1b0f9585b2221e3}{readGains} (const char $\ast$fName)
\item 
void \hyperlink{classCartWheel_1_1Core_1_1PoseController_a6070385fa69f77349735504fafcaae73}{readGains} (FILE $\ast$f)
\item 
void \hyperlink{classCartWheel_1_1Core_1_1PoseController_a4ab18da53609276376d80034f891cf46}{writeGains} (FILE $\ast$f)
\item 
void \hyperlink{classCartWheel_1_1Core_1_1PoseController_aba53f7222a9df8d1beec72536b711a81}{setTargetsFromState} ()
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{classCartWheel_1_1Math_1_1Vector3d}{CartWheel::Math::Vector3d} \hyperlink{classCartWheel_1_1Core_1_1PoseController_aac21af61ce098fa25723a64991f9f81f}{computePDTorque} (const \hyperlink{classCartWheel_1_1Math_1_1Quaternion}{CartWheel::Math::Quaternion} \&qRel, const \hyperlink{classCartWheel_1_1Math_1_1Quaternion}{CartWheel::Math::Quaternion} \&qRelD, const \hyperlink{classCartWheel_1_1Math_1_1Vector3d}{CartWheel::Math::Vector3d} \&wRel, const \hyperlink{classCartWheel_1_1Math_1_1Vector3d}{CartWheel::Math::Vector3d} \&wRelD, \hyperlink{classCartWheel_1_1Core_1_1ControlParams}{ControlParams} $\ast$pdParams)
\item 
static void \hyperlink{classCartWheel_1_1Core_1_1PoseController_aff8a23377cd8e222686cd762be41b19a}{scaleAndLimitTorque} (\hyperlink{classCartWheel_1_1Math_1_1Vector3d}{CartWheel::Math::Vector3d} $\ast$torque, \hyperlink{classCartWheel_1_1Core_1_1ControlParams}{ControlParams} $\ast$pdParams, const \hyperlink{classCartWheel_1_1Math_1_1Quaternion}{CartWheel::Math::Quaternion} \&qToChild)
\item 
static void \hyperlink{classCartWheel_1_1Core_1_1PoseController_a07dec65d047addfddec390f15ade136c}{limitTorque} (\hyperlink{classCartWheel_1_1Math_1_1Vector3d}{CartWheel::Math::Vector3d} $\ast$torque, \hyperlink{classCartWheel_1_1Core_1_1ControlParams}{ControlParams} $\ast$cParams)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{classCartWheel_1_1Core_1_1PoseController_ad05d09982370d04e508b54bebf7ba8a1}{parseGainLine} (const char $\ast$line)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classCartWheel_1_1Core_1_1PoseController_aeee624964f622d9a39d07355e1307d1c}{
\hyperlink{classCartWheel_1_1Core_1_1ReducedCharacterStateArray}{ReducedCharacterStateArray} {\bfseries desiredPose}}
\label{classCartWheel_1_1Core_1_1PoseController_aeee624964f622d9a39d07355e1307d1c}

\item 
\hypertarget{classCartWheel_1_1Core_1_1PoseController_a880edfa00d13b95491d29e13740d017b}{
DynamicArray$<$ \hyperlink{classCartWheel_1_1Core_1_1ControlParams}{ControlParams} $>$ {\bfseries controlParams}}
\label{classCartWheel_1_1Core_1_1PoseController_a880edfa00d13b95491d29e13740d017b}

\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\hypertarget{classCartWheel_1_1Core_1_1PoseController_a53f540ec72017006b082b2cb716644c1}{
class {\bfseries TestApp}}
\label{classCartWheel_1_1Core_1_1PoseController_a53f540ec72017006b082b2cb716644c1}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
A pose controller is used to have the character track a given pose. Each pose is given as a series of relative orientations, one for each parent-\/child pair (i.e. joint). Classes extending this one have to worry about setting the desired relative orientation properly. 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{classCartWheel_1_1Core_1_1PoseController_af6c78505668fd7101f9ce8d74637763b}{
\index{CartWheel::Core::PoseController@{CartWheel::Core::PoseController}!PoseController@{PoseController}}
\index{PoseController@{PoseController}!CartWheel::Core::PoseController@{CartWheel::Core::PoseController}}
\subsubsection[{PoseController}]{\setlength{\rightskip}{0pt plus 5cm}PoseController::PoseController ({\bf Character} $\ast$ {\em ch})}}
\label{classCartWheel_1_1Core_1_1PoseController_af6c78505668fd7101f9ce8d74637763b}
Constructor -\/ expects a character that it will work on 

\subsection{Member Function Documentation}
\hypertarget{classCartWheel_1_1Core_1_1PoseController_aac21af61ce098fa25723a64991f9f81f}{
\index{CartWheel::Core::PoseController@{CartWheel::Core::PoseController}!computePDTorque@{computePDTorque}}
\index{computePDTorque@{computePDTorque}!CartWheel::Core::PoseController@{CartWheel::Core::PoseController}}
\subsubsection[{computePDTorque}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Vector3d} PoseController::computePDTorque (const {\bf CartWheel::Math::Quaternion} \& {\em qRel}, \/  const {\bf CartWheel::Math::Quaternion} \& {\em qRelD}, \/  const {\bf CartWheel::Math::Vector3d} \& {\em wRel}, \/  const {\bf CartWheel::Math::Vector3d} \& {\em wRelD}, \/  {\bf ControlParams} $\ast$ {\em cParams})\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classCartWheel_1_1Core_1_1PoseController_aac21af61ce098fa25723a64991f9f81f}
This method is used to compute the PD torque, given the current relative orientation of two coordinate frames (child and parent), the relative angular velocity, the desired values for the relative orientation and ang. vel, as well as the virtual motor's PD gains. The torque returned is expressed in the coordinate frame of the 'parent'.

This method is used to compute the PD torque that aligns a child coordinate frame to a parent coordinate frame. Given: the current relative orientation of two coordinate frames (child and parent), the relative angular velocity, the desired values for the relative orientation and ang. vel, as well as the virtual motor's PD gains. The torque returned is expressed in the coordinate frame of the 'parent'. \hypertarget{classCartWheel_1_1Core_1_1PoseController_a48cf8c4a4ef762251f03a01ed8c24cd0}{
\index{CartWheel::Core::PoseController@{CartWheel::Core::PoseController}!computeTorques@{computeTorques}}
\index{computeTorques@{computeTorques}!CartWheel::Core::PoseController@{CartWheel::Core::PoseController}}
\subsubsection[{computeTorques}]{\setlength{\rightskip}{0pt plus 5cm}virtual void CartWheel::Core::PoseController::computeTorques (DynamicArray$<$ {\bf CartWheel::Physics::ContactPoint} $>$ $\ast$ {\em cfs})\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classCartWheel_1_1Core_1_1PoseController_a48cf8c4a4ef762251f03a01ed8c24cd0}
This method is used to compute the torques, based on the current and desired poses 

Implements \hyperlink{classCartWheel_1_1Core_1_1Controller_a4355027883ca8a1be4048d95577b8e74}{CartWheel::Core::Controller}.



Reimplemented in \hyperlink{classCartWheel_1_1Core_1_1IKVMCController_a0a944ad3c3178ecc74488c1697460883}{CartWheel::Core::IKVMCController}, and \hyperlink{classCartWheel_1_1Core_1_1SimBiController_aa6510698f1e27b154ace8e9459080322}{CartWheel::Core::SimBiController}.

\hypertarget{classCartWheel_1_1Core_1_1PoseController_a07dec65d047addfddec390f15ade136c}{
\index{CartWheel::Core::PoseController@{CartWheel::Core::PoseController}!limitTorque@{limitTorque}}
\index{limitTorque@{limitTorque}!CartWheel::Core::PoseController@{CartWheel::Core::PoseController}}
\subsubsection[{limitTorque}]{\setlength{\rightskip}{0pt plus 5cm}void PoseController::limitTorque ({\bf CartWheel::Math::Vector3d} $\ast$ {\em torque}, \/  {\bf ControlParams} $\ast$ {\em cParams})\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classCartWheel_1_1Core_1_1PoseController_a07dec65d047addfddec390f15ade136c}
This method is used to apply joint limits to the torque passed in as a parameter. It is assumed that the torque is already represented in the correct coordinate frame \hypertarget{classCartWheel_1_1Core_1_1PoseController_ad05d09982370d04e508b54bebf7ba8a1}{
\index{CartWheel::Core::PoseController@{CartWheel::Core::PoseController}!parseGainLine@{parseGainLine}}
\index{parseGainLine@{parseGainLine}!CartWheel::Core::PoseController@{CartWheel::Core::PoseController}}
\subsubsection[{parseGainLine}]{\setlength{\rightskip}{0pt plus 5cm}void PoseController::parseGainLine (const char $\ast$ {\em line})\hspace{0.3cm}{\ttfamily  \mbox{[}protected, virtual\mbox{]}}}}
\label{classCartWheel_1_1Core_1_1PoseController_ad05d09982370d04e508b54bebf7ba8a1}
This method is used to parse the information passed in the string. This class knows how to read lines that have the name of a joint, followed by a list of the pertinent parameters. If this assumption is not held, then classes extended this one are required to provide their own implementation of this simple parser 

Reimplemented in \hyperlink{classCartWheel_1_1Core_1_1SimBiController_a9508198fc8cc2f2ceb9c1edef8ed0a45}{CartWheel::Core::SimBiController}.

\hypertarget{classCartWheel_1_1Core_1_1PoseController_a6070385fa69f77349735504fafcaae73}{
\index{CartWheel::Core::PoseController@{CartWheel::Core::PoseController}!readGains@{readGains}}
\index{readGains@{readGains}!CartWheel::Core::PoseController@{CartWheel::Core::PoseController}}
\subsubsection[{readGains}]{\setlength{\rightskip}{0pt plus 5cm}void PoseController::readGains (FILE $\ast$ {\em f})}}
\label{classCartWheel_1_1Core_1_1PoseController_a6070385fa69f77349735504fafcaae73}
This method is used to read the gain coefficients, as well as max torque allowed for each joint from the file that is passed in as a parameter. \hypertarget{classCartWheel_1_1Core_1_1PoseController_ae70268cf3e1ef0d0d1b0f9585b2221e3}{
\index{CartWheel::Core::PoseController@{CartWheel::Core::PoseController}!readGains@{readGains}}
\index{readGains@{readGains}!CartWheel::Core::PoseController@{CartWheel::Core::PoseController}}
\subsubsection[{readGains}]{\setlength{\rightskip}{0pt plus 5cm}void PoseController::readGains (const char $\ast$ {\em fName})}}
\label{classCartWheel_1_1Core_1_1PoseController_ae70268cf3e1ef0d0d1b0f9585b2221e3}
This method is used to read the gain coefficients, as well as max torque allowed for each joint from the file that is passed in as a parameter. \hypertarget{classCartWheel_1_1Core_1_1PoseController_aff8a23377cd8e222686cd762be41b19a}{
\index{CartWheel::Core::PoseController@{CartWheel::Core::PoseController}!scaleAndLimitTorque@{scaleAndLimitTorque}}
\index{scaleAndLimitTorque@{scaleAndLimitTorque}!CartWheel::Core::PoseController@{CartWheel::Core::PoseController}}
\subsubsection[{scaleAndLimitTorque}]{\setlength{\rightskip}{0pt plus 5cm}void PoseController::scaleAndLimitTorque ({\bf CartWheel::Math::Vector3d} $\ast$ {\em torque}, \/  {\bf ControlParams} $\ast$ {\em cParams}, \/  const {\bf CartWheel::Math::Quaternion} \& {\em qToChild})\hspace{0.3cm}{\ttfamily  \mbox{[}static\mbox{]}}}}
\label{classCartWheel_1_1Core_1_1PoseController_aff8a23377cd8e222686cd762be41b19a}
This method is used to scale and apply joint limits to the torque that is passed in as a parameter. The orientation that transforms the torque from the coordinate frame that it is currently stored in, to the coordinate frame of the 'child' to which the torque is applied to (it wouldn't make sense to scale the torques in any other coordinate frame) is also passed in as a parameter. \hypertarget{classCartWheel_1_1Core_1_1PoseController_a943dbb6a3cc2ea8c4897cb4979983cea}{
\index{CartWheel::Core::PoseController@{CartWheel::Core::PoseController}!scaleGains@{scaleGains}}
\index{scaleGains@{scaleGains}!CartWheel::Core::PoseController@{CartWheel::Core::PoseController}}
\subsubsection[{scaleGains}]{\setlength{\rightskip}{0pt plus 5cm}virtual void CartWheel::Core::PoseController::scaleGains (double {\em factor})\hspace{0.3cm}{\ttfamily  \mbox{[}inline, virtual\mbox{]}}}}
\label{classCartWheel_1_1Core_1_1PoseController_a943dbb6a3cc2ea8c4897cb4979983cea}
Scale all the PD gains of the controller by the specified factor 

Reimplemented in \hyperlink{classCartWheel_1_1Core_1_1SimBiController_a07bdc28113f2c5d77ecd3d4b144faa8d}{CartWheel::Core::SimBiController}.

\hypertarget{classCartWheel_1_1Core_1_1PoseController_aba53f7222a9df8d1beec72536b711a81}{
\index{CartWheel::Core::PoseController@{CartWheel::Core::PoseController}!setTargetsFromState@{setTargetsFromState}}
\index{setTargetsFromState@{setTargetsFromState}!CartWheel::Core::PoseController@{CartWheel::Core::PoseController}}
\subsubsection[{setTargetsFromState}]{\setlength{\rightskip}{0pt plus 5cm}void PoseController::setTargetsFromState ()}}
\label{classCartWheel_1_1Core_1_1PoseController_aba53f7222a9df8d1beec72536b711a81}
sets the targets to match the current state of the character \hypertarget{classCartWheel_1_1Core_1_1PoseController_a4ab18da53609276376d80034f891cf46}{
\index{CartWheel::Core::PoseController@{CartWheel::Core::PoseController}!writeGains@{writeGains}}
\index{writeGains@{writeGains}!CartWheel::Core::PoseController@{CartWheel::Core::PoseController}}
\subsubsection[{writeGains}]{\setlength{\rightskip}{0pt plus 5cm}void PoseController::writeGains (FILE $\ast$ {\em f})}}
\label{classCartWheel_1_1Core_1_1PoseController_a4ab18da53609276376d80034f891cf46}
This method is used to write the gain coefficients, as well as max torque allowed for each joint from the file that is passed in as a parameter. 

The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
include/Core/PoseController.h\item 
src/Core/PoseController.cpp\end{DoxyCompactItemize}
