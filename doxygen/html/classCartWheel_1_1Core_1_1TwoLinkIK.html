<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>UA-Cartwheel: CartWheel::Core::TwoLinkIK Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespaceCartWheel.html">CartWheel</a>::<b>Core</b>::<a class="el" href="classCartWheel_1_1Core_1_1TwoLinkIK.html">TwoLinkIK</a>
  </div>
</div>
<div class="contents">
<h1>CartWheel::Core::TwoLinkIK Class Reference</h1><!-- doxytag: class="CartWheel::Core::TwoLinkIK" -->
<p><code>#include &lt;<a class="el" href="TwoLinkIK_8h_source.html">TwoLinkIK.h</a>&gt;</code></p>

<p><a href="classCartWheel_1_1Core_1_1TwoLinkIK-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classCartWheel_1_1Math_1_1Point3d.html">CartWheel::Math::Point3d</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCartWheel_1_1Core_1_1TwoLinkIK.html#a27c5a87ae2b76b3bcdc822e35059acce">solve</a> (const <a class="el" href="classCartWheel_1_1Math_1_1Point3d.html">CartWheel::Math::Point3d</a> &amp;p1, const <a class="el" href="classCartWheel_1_1Math_1_1Point3d.html">CartWheel::Math::Point3d</a> &amp;p2, const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;n, double r1, double r2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classCartWheel_1_1Math_1_1Quaternion.html">CartWheel::Math::Quaternion</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCartWheel_1_1Core_1_1TwoLinkIK.html#a79e039bab10cb8a0a80c673034b8d30f">getParentOrientation</a> (const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;vGlobal, const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;nGlobal, <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> vLocal, const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;nLocal)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static double&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCartWheel_1_1Core_1_1TwoLinkIK.html#a7286e17fe5def23330d98c013630a5bc">getChildRotationAngle</a> (const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;vParent, const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;vChild, const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> n)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCartWheel_1_1Core_1_1TwoLinkIK.html#a18d95e0099d3419cd6a1d7c34dd291a7">getIKOrientations</a> (const <a class="el" href="classCartWheel_1_1Math_1_1Point3d.html">CartWheel::Math::Point3d</a> &amp;p1, const <a class="el" href="classCartWheel_1_1Math_1_1Point3d.html">CartWheel::Math::Point3d</a> &amp;p2, const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;n, const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;vParent, const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;nParent, const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;vChild, <a class="el" href="classCartWheel_1_1Math_1_1Quaternion.html">CartWheel::Math::Quaternion</a> *qP, <a class="el" href="classCartWheel_1_1Math_1_1Quaternion.html">CartWheel::Math::Quaternion</a> *qC)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This class implements an analytical solution for the inverse kinematics of a linkage composed of two links - a parent link and a child link. The origin of the parent link is fixed, and the desired position for the end effector of the child is given as input. The position of the origin of the child link is computed, and, with this information, the orientation of the parent and child links are also computed. This can be seen, generally speaking, as the solution of the intersection of two spheres, which gives an infinte number of solutions. To reduce this, a vector that represents the normal to the plane that the three points (parent origin, child origin and child end effector) should lie on is given as input. The child can only rotate relative to the parent around this normal axis, which can be used as a prior. This results in two possible solutions. The direction of the normal is used to select a unique solution. </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a7286e17fe5def23330d98c013630a5bc"></a><!-- doxytag: member="CartWheel::Core::TwoLinkIK::getChildRotationAngle" ref="a7286e17fe5def23330d98c013630a5bc" args="(const CartWheel::Math::Vector3d &amp;vParent, const CartWheel::Math::Vector3d &amp;vChild, const CartWheel::Math::Vector3d n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static double CartWheel::Core::TwoLinkIK::getChildRotationAngle </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vParent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vChild</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a>&nbsp;</td>
          <td class="paramname"> <em>n</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This method determines the rotation angle about the axis n for the child link, relative to the orientation of the parent Input (all quantities need to be measured in the same coordinate frame): (Note: v is the vector from a link's origin to the end effector or the child link's origin). vParent - the v qunatity for the parent vChild - the v quntity for the child (vector between the child origin and the end effector). n - the axis of rotation Output: q - the relative orientation between the child and parent frames </p>

</div>
</div>
<a class="anchor" id="a18d95e0099d3419cd6a1d7c34dd291a7"></a><!-- doxytag: member="CartWheel::Core::TwoLinkIK::getIKOrientations" ref="a18d95e0099d3419cd6a1d7c34dd291a7" args="(const CartWheel::Math::Point3d &amp;p1, const CartWheel::Math::Point3d &amp;p2, const CartWheel::Math::Vector3d &amp;n, const CartWheel::Math::Vector3d &amp;vParent, const CartWheel::Math::Vector3d &amp;nParent, const CartWheel::Math::Vector3d &amp;vChild, CartWheel::Math::Quaternion *qP, CartWheel::Math::Quaternion *qC)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TwoLinkIK::getIKOrientations </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Point3d.html">CartWheel::Math::Point3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>p1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Point3d.html">CartWheel::Math::Point3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>p2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vParent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>nParent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vChild</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCartWheel_1_1Math_1_1Quaternion.html">CartWheel::Math::Quaternion</a> *&nbsp;</td>
          <td class="paramname"> <em>qP</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCartWheel_1_1Math_1_1Quaternion.html">CartWheel::Math::Quaternion</a> *&nbsp;</td>
          <td class="paramname"> <em>qC</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>All quantities that are passed in as parameters here need to be expressed in the same "global" coordinate frame, unless otherwise noted:</p>
<ul>
<li>p1: this is the location of the origin of the parent link</li>
<li>p2: this is the target location of the end effector on the child link</li>
<li>n: this is the default normal to the rotation plane (it will get modified as little as possible to account for the target location)</li>
</ul>
<ul>
<li>vParent: vector from parent origin to child origin, expressed in parent coordinates</li>
<li>nParent: this is the rotation axis, expressed in parent coordinates. The relative orientation between child and parent will be about this axis</li>
<li>vChild: vector from child origin, to position of the end effector, expressed in child coordinates</li>
</ul>
<p>Output:</p>
<ul>
<li>qP: relative orientation of parent, relative to "global" coordinate frame</li>
<li>qC: relative orientation of child, relative to the parent coordinate frame</li>
</ul>
<p>NOTE: for now, the vector vChild is pretty much ignored. Only its length is taken into account. The axis that the child is lined up around is the same as the direction of the vector from the parent's origin to the child's origin (when there is zero relative orientation between the two, the axis has the same coordinates in both child and parent frame). </p>

</div>
</div>
<a class="anchor" id="a79e039bab10cb8a0a80c673034b8d30f"></a><!-- doxytag: member="CartWheel::Core::TwoLinkIK::getParentOrientation" ref="a79e039bab10cb8a0a80c673034b8d30f" args="(const CartWheel::Math::Vector3d &amp;vGlobal, const CartWheel::Math::Vector3d &amp;nGlobal, CartWheel::Math::Vector3d vLocal, const CartWheel::Math::Vector3d &amp;nLocal)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classCartWheel_1_1Math_1_1Quaternion.html">CartWheel::Math::Quaternion</a> CartWheel::Core::TwoLinkIK::getParentOrientation </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>vGlobal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>nGlobal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a>&nbsp;</td>
          <td class="paramname"> <em>vLocal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>nLocal</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This method determines the orientation for the parent link, relative to some other coordinate ("global") frame. Two vectors (one that goes from the parent origin to the child origin v, as well as a normal vector n) are known, expressed both in the global frame and the parent frame. Using this information, we can figure out the relative orientation between the parent frame and the global frame.</p>
<p>Input: vGlobal - parent's v expressed in grandparent coordinates nGlobal - this is the rotation axis that is used for the relative rotation between the child and the parent joint, expressed in grandparent coordinates vLocal - parent's v expressed in the parent's local coordinates nLocal - this is the rotation axis that is used for the relative rotation between the child and the parent joint, expressed in parent's local coordinates Output: q - the relative orientation between the parent and the grandparent (i.e. transforms vectors from parent coordinates to grandparent coordinates). </p>

</div>
</div>
<a class="anchor" id="a27c5a87ae2b76b3bcdc822e35059acce"></a><!-- doxytag: member="CartWheel::Core::TwoLinkIK::solve" ref="a27c5a87ae2b76b3bcdc822e35059acce" args="(const CartWheel::Math::Point3d &amp;p1, const CartWheel::Math::Point3d &amp;p2, const CartWheel::Math::Vector3d &amp;n, double r1, double r2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classCartWheel_1_1Math_1_1Point3d.html">CartWheel::Math::Point3d</a> CartWheel::Core::TwoLinkIK::solve </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Point3d.html">CartWheel::Math::Point3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>p1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Point3d.html">CartWheel::Math::Point3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>p2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>r1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>r2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This method determines the position of the joint between the child and parent links. Input (all quantities need to be measured in the same coordinate frame): p1 - location of parent's origin (for example the shoulder for an arm) p2 - target location of end effector of child link (for example, the wrist location) n - normal to the plane in which the relative motion between parent and child will take place r1 - the length of the parent link r2 - the length of the child link Return: p - the position of the joint (the elbow, for instance), measured in the same coordinates as the values passed in here </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/Core/<a class="el" href="TwoLinkIK_8h_source.html">TwoLinkIK.h</a></li>
<li>src/Core/TwoLinkIK.cpp</li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Mon Apr 18 13:30:01 2011 for UA-Cartwheel by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
