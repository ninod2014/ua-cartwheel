<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>UA-Cartwheel: include/Physics/PlaneCDP.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>include/Physics/PlaneCDP.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#pragma once</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span>
<a name="l00003"></a>00003 <span class="preprocessor">#include &lt;Utils/Utils.h&gt;</span>
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;MathLib/Point3d.h&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;MathLib/Vector3d.h&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;MathLib/Plane.h&gt;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;Physics/PhysicsDll.h&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;Physics/CollisionDetectionPrimitive.h&gt;</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="keyword">namespace </span>CartWheel { <span class="keyword">namespace </span>Physics {
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="comment">/*========================================================================================================================================================================*</span>
<a name="l00015"></a>00015 <span class="comment"> * This class implements a plane class that will be used as a collision detection primitive.                                                                              *</span>
<a name="l00016"></a>00016 <span class="comment"> * A plane is represented by the position of one point on the plane, as well as the normal (unit vector) to the plane. We will store these two quantities both in local   *</span>
<a name="l00017"></a>00017 <span class="comment"> * coordinates, and in world coordinates which will be used for the collision detection. NOTE: we will not be evaluating the collision between different planes because   *</span>
<a name="l00018"></a>00018 <span class="comment"> * I will assume that they are all part of fixed objects only.</span>
<a name="l00019"></a>00019 <span class="comment"> *========================================================================================================================================================================*/</span>
<a name="l00020"></a><a class="code" href="classCartWheel_1_1Physics_1_1PlaneCDP.html">00020</a> <span class="keyword">class </span>PHYSICS_DECLSPEC <a class="code" href="classCartWheel_1_1Physics_1_1PlaneCDP.html">PlaneCDP</a> : <span class="keyword">public</span> <a class="code" href="classCartWheel_1_1Physics_1_1CollisionDetectionPrimitive.html">CollisionDetectionPrimitive</a>{
<a name="l00021"></a>00021         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classCartWheel_1_1Physics_1_1SphereCDP.html">SphereCDP</a>;
<a name="l00022"></a>00022         <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classCartWheel_1_1Physics_1_1CapsuleCDP.html">CapsuleCDP</a>;
<a name="l00023"></a>00023 <span class="keyword">private</span>:
<a name="l00024"></a>00024         <span class="comment">//this is the plane, expressed in the local coordinates of the rigid body that owns it</span>
<a name="l00025"></a>00025         <a class="code" href="classCartWheel_1_1Math_1_1Plane.html">CartWheel::Math::Plane</a> p;
<a name="l00026"></a>00026         <span class="comment">//and this is the plane expressed in world coordinates</span>
<a name="l00027"></a>00027         <a class="code" href="classCartWheel_1_1Math_1_1Plane.html">CartWheel::Math::Plane</a> wP;
<a name="l00028"></a>00028         
<a name="l00029"></a>00029 <span class="keyword">public</span>:
<a name="l00030"></a>00030         <a class="code" href="classCartWheel_1_1Physics_1_1PlaneCDP.html">PlaneCDP</a>(<span class="keyword">const</span> <a class="code" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a>&amp; normal, <span class="keyword">const</span> <a class="code" href="classCartWheel_1_1Math_1_1Point3d.html">CartWheel::Math::Point3d</a>&amp; origin, <a class="code" href="classCartWheel_1_1Physics_1_1RigidBody.html">RigidBody</a>* theBody = NULL ) :
<a name="l00031"></a>00031           <a class="code" href="classCartWheel_1_1Physics_1_1CollisionDetectionPrimitive.html">CollisionDetectionPrimitive</a>( PLANE_CDP, theBody )
<a name="l00032"></a>00032         {
<a name="l00033"></a>00033                 p.n = normal;
<a name="l00034"></a>00034                 p.n.<a class="code" href="classCartWheel_1_1Math_1_1Vector3d.html#af4cfde7678c0584227451f761effdab5">toUnit</a>();
<a name="l00035"></a>00035                 p.p = origin;
<a name="l00036"></a>00036         }
<a name="l00037"></a>00037         <a class="code" href="classCartWheel_1_1Physics_1_1PlaneCDP.html">PlaneCDP</a>(<a class="code" href="classCartWheel_1_1Physics_1_1RigidBody.html">RigidBody</a>* theBody = NULL ) :
<a name="l00038"></a>00038                 <a class="code" href="classCartWheel_1_1Physics_1_1CollisionDetectionPrimitive.html">CollisionDetectionPrimitive</a>( PLANE_CDP, theBody ) {}
<a name="l00039"></a>00039         ~<a class="code" href="classCartWheel_1_1Physics_1_1PlaneCDP.html">PlaneCDP</a>(<span class="keywordtype">void</span>);
<a name="l00040"></a>00040 
<a name="l00041"></a>00041         <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* save() { <span class="keywordflow">return</span> <span class="stringliteral">&quot;PlaneCDP&quot;</span>; }
<a name="l00042"></a>00042 
<a name="l00043"></a>00043         <span class="keyword">virtual</span> <span class="keywordtype">void</span> updateToWorldPrimitive();
<a name="l00044"></a>00044 
<a name="l00045"></a>00045         <span class="keyword">virtual</span> <span class="keywordtype">void</span> draw();
<a name="l00046"></a>00046         <span class="keyword">const</span> <a class="code" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a>&amp; getNormal()<span class="keyword"> const </span>{<span class="keywordflow">return</span> p.n;}
<a name="l00047"></a>00047         <span class="keyword">inline</span> <span class="keywordtype">void</span> setNormal( <span class="keyword">const</span> <a class="code" href="classCartWheel_1_1Math_1_1Vector3d.html">CartWheel::Math::Vector3d</a>&amp; normal ) { p.n = normal; }
<a name="l00048"></a>00048         <span class="keyword">const</span> <a class="code" href="classCartWheel_1_1Math_1_1Point3d.html">CartWheel::Math::Point3d</a>&amp; getOrigin()<span class="keyword"> const </span>{<span class="keywordflow">return</span> p.p;};
<a name="l00049"></a>00049         <span class="keyword">inline</span> <span class="keywordtype">void</span> setOrigin( <span class="keyword">const</span> <a class="code" href="classCartWheel_1_1Math_1_1Point3d.html">CartWheel::Math::Point3d</a>&amp; origin ) { p.p = origin; }
<a name="l00050"></a>00050 
<a name="l00051"></a>00051         <span class="keyword">virtual</span> <span class="keywordtype">int</span> computeCollisionsWith(<a class="code" href="classCartWheel_1_1Physics_1_1CollisionDetectionPrimitive.html">CollisionDetectionPrimitive</a>* other,  DynamicArray&lt;ContactPoint&gt; *cps){
<a name="l00052"></a>00052                 <span class="comment">//we don&#39;t know what the other collision detection primitive is, but we know this one is a plane, so make</span>
<a name="l00053"></a>00053                 <span class="comment">//other compute the contact points with this plane</span>
<a name="l00054"></a>00054                 <span class="keywordtype">int</span> oldContactCount = cps-&gt;size();
<a name="l00055"></a>00055                 <span class="keywordtype">int</span> nContacts = other-&gt;computeCollisionsWithPlaneCDP(<span class="keyword">this</span>, cps);
<a name="l00056"></a>00056 
<a name="l00057"></a>00057                 <span class="comment">//make sure the normals still point from other to this...</span>
<a name="l00058"></a>00058                 <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=oldContactCount;i&lt;cps-&gt;size();i++)
<a name="l00059"></a>00059                         ((*cps)[i]).n *= -1;
<a name="l00060"></a>00060                 <span class="keywordflow">return</span> nContacts;
<a name="l00061"></a>00061         }
<a name="l00062"></a>00062 
<a name="l00063"></a>00063         <span class="keyword">virtual</span> <span class="keywordtype">int</span> computeCollisionsWithSphereCDP(<a class="code" href="classCartWheel_1_1Physics_1_1SphereCDP.html">SphereCDP</a>* sp,  DynamicArray&lt;ContactPoint&gt; *cps);
<a name="l00064"></a>00064 
<a name="l00065"></a>00065         <span class="keyword">virtual</span> <span class="keywordtype">int</span> computeCollisionsWithPlaneCDP(<a class="code" href="classCartWheel_1_1Physics_1_1PlaneCDP.html">PlaneCDP</a>* <span class="comment">/* sp */</span>,  DynamicArray&lt;ContactPoint&gt;* <span class="comment">/* cps */</span>){<span class="keywordflow">return</span> 0;}
<a name="l00066"></a>00066         <span class="keyword">virtual</span> <span class="keywordtype">int</span> computeCollisionsWithCapsuleCDP(<a class="code" href="classCartWheel_1_1Physics_1_1CapsuleCDP.html">CapsuleCDP</a>* c,  DynamicArray&lt;ContactPoint&gt; *cps);
<a name="l00067"></a>00067         <span class="keyword">virtual</span> <span class="keywordtype">int</span> computeCollisionsWithBoxCDP(<a class="code" href="classCartWheel_1_1Physics_1_1BoxCDP.html">BoxCDP</a>* <span class="comment">/* sp */</span>,  DynamicArray&lt;ContactPoint&gt;* <span class="comment">/* cps */</span>){<span class="keywordflow">return</span> 0;}
<a name="l00068"></a>00068 
<a name="l00069"></a>00069 };
<a name="l00070"></a>00070 
<a name="l00071"></a>00071 }
<a name="l00072"></a>00072 }
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Mon Apr 18 13:29:15 2011 for UA-Cartwheel by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
